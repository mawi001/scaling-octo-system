{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:best-practices"
  ],
  "commitMessageTopic": "{{depName}}",
  "commitMessageExtra": "from {{currentVersion}} to {{newVersion}}",
  "packageRules": [
    {
      "description": "Disable direct image updates when managed via helmCharts",
      "matchManagers": [
        "kubernetes"
      ],
      "matchFileNames": [
        "**/overlays/**",
        "**/base/**"
      ],
      "enabled": false,
      "matchPackageNames": [
        "/^.*?/.*?/"
      ]
    },
    {
      "description": "Major updates for overlays (separate by environment)",
      "matchFileNames": [
        "**/overlays/**"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "matchUpdateTypes": [
        "major"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} overlay (major)",
      "labels": [
        "{{parentDir}}",
        "major"
      ],
      "commitMessagePrefix": "[{{packageFileDir}}] ",
      "commitMessageAction": "Upgrade major"
    },
    {
      "description": "Minor updates for overlays (separate by environment)",
      "matchFileNames": [
        "**/overlays/**"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "matchUpdateTypes": [
        "minor"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} overlay (minor)",
      "labels": [
        "{{parentDir}}",
        "minor"
      ],
      "commitMessagePrefix": "[{{packageFileDir}}] ",
      "commitMessageAction": "Upgrade minor"
    },
    {
      "description": "Patch updates for overlays (group by environment)",
      "matchFileNames": [
        "**/overlays/**"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} overlay (patch)",
      "labels": [
        "{{parentDir}}",
        "patch"
      ],
      "commitMessagePrefix": "[{{packageFileDir}}] ",
      "commitMessageAction": "Upgrade patch"
    },
    {
      "description": "Base updates (patch)",
      "matchFileNames": [
        "**/base/**"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} base (patch)",
      "labels": [
        "base",
        "patch"
      ],
      "commitMessagePrefix": "[base] ",
      "commitMessageAction": "Upgrade patch"
    },
    {
      "description": "Base updates (minor)",
      "matchFileNames": [
        "**/base/**"
      ],
      "matchUpdateTypes": [
        "minor"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} base (minor)",
      "labels": [
        "base",
        "minor"
      ],
      "commitMessagePrefix": "[base] ",
      "commitMessageAction": "Upgrade minor"
    },
    {
      "description": "Base updates (major)",
      "matchFileNames": [
        "**/base/**"
      ],
      "matchUpdateTypes": [
        "major"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} base (major)",
      "labels": [
        "base",
        "major"
      ],
      "commitMessagePrefix": "[base] ",
      "commitMessageAction": "Upgrade major"
    },
    {
      "description": "Ignore non-YAML files in kustomize directories",
      "matchFileNames": [
        "**/charts/**",
        "**/components/**"
      ],
      "enabled": false
    },
    {
      "description": "Major updates for images in overlays",
      "matchFileNames": [
        "**/overlays/**"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "matchUpdateTypes": [
        "major"
      ],
      "matchDatasources": [
        "docker"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} images (major)",
      "labels": [
        "{{parentDir}}",
        "major",
        "image"
      ],
      "commitMessagePrefix": "[{{packageFileDir}}] ",
      "commitMessageAction": "Upgrade image major"
    },
    {
      "description": "Minor updates for images in overlays",
      "matchFileNames": [
        "**/overlays/**"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "matchUpdateTypes": [
        "minor"
      ],
      "matchDatasources": [
        "docker"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} images (minor)",
      "labels": [
        "{{parentDir}}",
        "minor",
        "image"
      ],
      "commitMessagePrefix": "[{{packageFileDir}}] ",
      "commitMessageAction": "Upgrade image minor"
    },
    {
      "description": "Patch updates for images in overlays",
      "matchFileNames": [
        "**/overlays/**"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "matchDatasources": [
        "docker"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} images (patch)",
      "labels": [
        "{{parentDir}}",
        "patch",
        "image"
      ],
      "commitMessagePrefix": "[{{packageFileDir}}] ",
      "commitMessageAction": "Upgrade image patch"
    },
    {
      "description": "Major updates for images in base",
      "matchFileNames": [
        "**/base/**"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "matchUpdateTypes": [
        "major"
      ],
      "matchDatasources": [
        "docker"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} images (major)",
      "labels": [
        "base",
        "major",
        "image"
      ],
      "commitMessagePrefix": "[base] ",
      "commitMessageAction": "Upgrade image major"
    },
    {
      "description": "Minor updates for images in base",
      "matchFileNames": [
        "**/base/**"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "matchUpdateTypes": [
        "minor"
      ],
      "matchDatasources": [
        "docker"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} images (minor)",
      "labels": [
        "base",
        "minor",
        "image"
      ],
      "commitMessagePrefix": "[base] ",
      "commitMessageAction": "Upgrade image minor"
    },
    {
      "description": "Patch updates for images in base",
      "matchFileNames": [
        "**/base/**"
      ],
      "matchManagers": [
        "kustomize"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "matchDatasources": [
        "docker"
      ],
      "groupName": "{{parentDir}} {{packageFileDir}} images (patch)",
      "labels": [
        "base",
        "patch",
        "image"
      ],
      "commitMessagePrefix": "[base] ",
      "commitMessageAction": "Upgrade image patch"
    }
  ],
  "enabledManagers": [
    "kubernetes",
    "kustomize",
    "docker-compose",
    "dockerfile",
    "github-actions"
  ],
  "kubernetes": {
    "managerFilePatterns": [
      "/(^|/)kustomization\\.yaml$/"
    ],
    "ignorePaths": [
      "**/values.yaml"
    ]
  },
  "kustomize": {
    "managerFilePatterns": [
      "/(^|/)kustomization\\.yaml$/"
    ]
  },
  "ignorePaths": [
    "**/README.md",
    "**/*.png"
  ],
  "platformAutomerge": false,
  "automergeType": "pr",
  "dependencyDashboard": true,
  "repositories": [
    "mawi001/scaling-octo-system"
  ],
  "onboarding": false,
  "requireConfig": "optional"
}
